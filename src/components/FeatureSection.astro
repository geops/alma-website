---
import { Image } from "astro:assets";

import FeatureDataImage from "../images/feature-data.png";
import FeatureExportImage from "../images/feature-export.png";
import FeatureWorkflowImage from "../images/feature-workflow.png";
import { useTranslations } from "../lib.ts";

const t = useTranslations(Astro.currentLocale);

const features = [
  { key: "data", image: FeatureDataImage },
  { key: "geodata", screencast: true },
  { key: "workflow", image: FeatureWorkflowImage },
  { key: "export", image: FeatureExportImage },
] as const;
---

<section id="features">
  <div class="container mx-auto space-y-10 px-4 py-10">
    <h1 class="text-center">{t("feature.heading")}</h1>
    {
      features.map(async (feature) => {
        return (
          <div class="flex flex-col space-y-6 md:my-16 md:flex-row-reverse md:items-center md:space-y-0 md:space-x-10 md:space-x-reverse lg:my-24 lg:space-x-20 lg:space-x-reverse">
            {"screencast" in feature ? (
              <video
                class="md:w-1/2 rounded-2xl"
                autoplay
                loop
                muted
                playsinline
                src={`/screencasts/${feature.key}.mp4`}
                poster={`/screencasts/${feature.key}.png`}
              />
            ) : (
              <Image
                class="md:w-1/2"
                src={feature.image}
                alt={t(`feature.${feature.key}.heading`)}
              />
            )}
            <div class="md:w-1/2">
              <h2>{t(`feature.${feature.key}.heading`)}</h2>
              <h3 class="bg-blue-1 text-blue-5 mt-6 mb-4 rounded-lg px-3 py-1 font-medium w-fit">
                {t(`feature.${feature.key}.subheading`)}
              </h3>
              <ul set:html={t(`feature.${feature.key}.list`)} />
            </div>
          </div>
        );
      })
    }
  </div>
</section>
